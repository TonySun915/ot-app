<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åŠ ç­è²»è©¦ç®—</title>
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#0a0e27">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --neon-cyan: #00f0ff;
  --neon-blue: #0066ff;
  --neon-purple: #8b5cf6;
  --neon-pink: #ff00ff;
  --dark-bg: #0a0e27;
  --dark-surface: rgba(15, 23, 42, 0.8);
  --glass-bg: rgba(255, 255, 255, 0.05);
  --glass-border: rgba(255, 255, 255, 0.1);
}

body {
  font-family: 'Rajdhani', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", Arial;
  background: var(--dark-bg);
  margin: 0;
  padding: 16px;
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
}

/* å‹•æ…‹èƒŒæ™¯ */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 50%, rgba(0, 240, 255, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(0, 102, 255, 0.1) 0%, transparent 50%);
  animation: backgroundShift 20s ease infinite;
  z-index: 0;
  pointer-events: none;
}

@keyframes backgroundShift {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.1); }
}

/* ç²’å­æ•ˆæœ */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(2px 2px at 20% 30%, var(--neon-cyan), transparent),
    radial-gradient(2px 2px at 60% 70%, var(--neon-purple), transparent),
    radial-gradient(1px 1px at 50% 50%, var(--neon-blue), transparent),
    radial-gradient(1px 1px at 80% 10%, var(--neon-cyan), transparent),
    radial-gradient(2px 2px at 90% 60%, var(--neon-purple), transparent);
  background-size: 200% 200%;
  animation: particleMove 30s linear infinite;
  z-index: 0;
  pointer-events: none;
  opacity: 0.4;
}

@keyframes particleMove {
  0% { background-position: 0% 0%; }
  100% { background-position: 100% 100%; }
}

.container {
  max-width: 480px;
  margin: auto;
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 24px;
  padding: 32px;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(0, 240, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  position: relative;
  z-index: 1;
  animation: containerGlow 3s ease-in-out infinite;
}

@keyframes containerGlow {
  0%, 100% { box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(0, 240, 255, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
  50% { box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(0, 240, 255, 0.3), 0 0 30px rgba(0, 240, 255, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
}

h2 { 
  text-align: center; 
  margin-bottom: 32px;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  font-size: 28px;
  background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple), var(--neon-pink));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 30px rgba(0, 240, 255, 0.5);
  letter-spacing: 2px;
  animation: titlePulse 2s ease-in-out infinite;
}

@keyframes titlePulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}

.field { 
  margin-bottom: 24px;
  position: relative;
}

.field label { 
  font-size: 14px; 
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 8px; 
  display: block;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  font-size: 12px;
}

.field input {
  width: 100%;
  font-size: 18px;
  padding: 16px;
  border-radius: 12px;
  border: 2px solid rgba(0, 240, 255, 0.2);
  background: rgba(0, 0, 0, 0.3);
  color: #fff;
  font-family: 'Rajdhani', sans-serif;
  font-weight: 600;
  transition: all 0.3s ease;
  outline: none;
}

.field input:focus {
  border-color: var(--neon-cyan);
  background: rgba(0, 240, 255, 0.1);
  box-shadow: 
    0 0 20px rgba(0, 240, 255, 0.4),
    inset 0 0 20px rgba(0, 240, 255, 0.1);
  transform: translateY(-2px);
}

.field input::placeholder {
  color: rgba(255, 255, 255, 0.3);
}

details {
  background: rgba(0, 240, 255, 0.05);
  border: 1px solid rgba(0, 240, 255, 0.2);
  border-radius: 16px;
  padding: 16px;
  margin-top: 16px;
  transition: all 0.3s ease;
}

details:hover {
  background: rgba(0, 240, 255, 0.1);
  border-color: var(--neon-cyan);
  box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
}

details[open] {
  background: rgba(0, 240, 255, 0.08);
  border-color: var(--neon-cyan);
  box-shadow: 0 0 30px rgba(0, 240, 255, 0.3);
}

summary { 
  font-weight: 700; 
  cursor: pointer;
  color: var(--neon-cyan);
  font-size: 16px;
  user-select: none;
  transition: all 0.3s ease;
}

summary:hover {
  color: #fff;
  text-shadow: 0 0 10px var(--neon-cyan);
}

.holiday-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-top: 16px;
}

.holiday-grid input {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 2px solid rgba(139, 92, 246, 0.2);
  background: rgba(0, 0, 0, 0.3);
  color: #fff;
  font-size: 16px;
  transition: all 0.3s ease;
}

.holiday-grid input:focus {
  border-color: var(--neon-purple);
  background: rgba(139, 92, 246, 0.1);
  box-shadow: 0 0 15px rgba(139, 92, 246, 0.4);
}

@media (max-width: 480px) {
  .holiday-grid { grid-template-columns: 1fr; }
  .container { padding: 24px; }
  h2 { font-size: 24px; }
}

.summary {
  background: rgba(139, 92, 246, 0.1);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 16px;
  padding: 20px;
  margin-top: 24px;
  font-size: 14px;
  line-height: 1.8;
  color: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.2);
}

.result {
  background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
  color: #fff;
  border-radius: 20px;
  padding: 28px;
  text-align: center;
  margin-top: 28px;
  position: relative;
  overflow: hidden;
  box-shadow: 
    0 10px 40px rgba(0, 102, 255, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  animation: resultGlow 2s ease-in-out infinite;
}

@keyframes resultGlow {
  0%, 100% { box-shadow: 0 10px 40px rgba(0, 102, 255, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.2); }
  50% { box-shadow: 0 10px 50px rgba(0, 102, 255, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.2), 0 0 40px rgba(139, 92, 246, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3); }
}

.result::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  animation: shine 3s infinite;
}

@keyframes shine {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.result > * {
  position: relative;
  z-index: 1;
}

.result span { 
  font-size: 42px; 
  font-weight: 900;
  font-family: 'Orbitron', sans-serif;
  display: inline-block;
  background: linear-gradient(135deg, #fff, var(--neon-cyan));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
  animation: numberPulse 1.5s ease-in-out infinite;
  letter-spacing: 2px;
}

@keyframes numberPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* æ»¾å‹•æ¢æ¨£å¼ */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--dark-bg);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--neon-cyan), var(--neon-purple));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, var(--neon-purple), var(--neon-pink));
}
</style>
</head>

<body>

<div class="container">
  <h2>âš¡ åŠ ç­è²»è©¦ç®—ç³»çµ±</h2>

  <div class="field">
    <label>æœ¬è–ªï¼ˆæœˆè–ªï¼‰</label>
    <input type="number" id="salary" oninput="calc()">
  </div>

  <div class="field">
    <label>ç¸½åŠ ç­æ™‚æ•¸</label>
    <input type="number" id="totalOT" oninput="calc()">
  </div>

  <div class="field">
    <label>å¹³æ—¥è¶…é 2 å°æ™‚çš„æ™‚æ•¸</label>
    <input type="number" id="weekdayOver2" oninput="calc()">
  </div>

  <div class="field">
    <label>åœ‹å®šå‡æ—¥åŠ ç­å¤©æ•¸</label>
    <input type="number" id="holidayDays" oninput="calc()">
  </div>

  <details>
    <summary>ğŸ“… ä¼‘æ¯æ—¥åŠ ç­ï¼ˆæœ€å¤š 5 å¤©ï¼‰</summary>
    <div class="holiday-grid">
      <input type="number" id="h1" placeholder="ç¬¬ 1 å¤©" oninput="calc()">
      <input type="number" id="h2" placeholder="ç¬¬ 2 å¤©" oninput="calc()">
      <input type="number" id="h3" placeholder="ç¬¬ 3 å¤©" oninput="calc()">
      <input type="number" id="h4" placeholder="ç¬¬ 4 å¤©" oninput="calc()">
      <input type="number" id="h5" placeholder="ç¬¬ 5 å¤©" oninput="calc()">
    </div>
  </details>

  <div class="summary" id="detail">ğŸ“‹ è«‹è¼¸å…¥è³‡æ–™ä»¥é–‹å§‹è¨ˆç®—</div>

  <div class="result">
    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;">åŠ ç­è²»ç¸½è¨ˆ</div>
    <div style="font-size: 16px; opacity: 0.7; margin-bottom: 12px;">NT$</div>
    <span id="total">0</span>
  </div>
</div>

<script>
function holidayPay(hours, hourly) {
  const h1 = Math.min(hours, 2);
  const h2 = Math.min(Math.max(hours - 2, 0), 6);
  const h3 = Math.min(Math.max(hours - 8, 0), 2);
  return hourly * (h1 * 1.34 + h2 * 1.67 + h3 * 2.67);
}

function val(id) {
  return Number(document.getElementById(id).value) || 0;
}

function animateNumber(element, start, end, duration = 500) {
  const startTime = performance.now();
  const difference = end - start;
  
  function update(currentTime) {
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
    const current = Math.round(start + difference * easeOutQuart);
    
    element.innerText = current.toLocaleString('zh-TW');
    
    if (progress < 1) {
      requestAnimationFrame(update);
    }
  }
  
  requestAnimationFrame(update);
}

function calc() {
  const salary = val("salary");
  const totalOT = val("totalOT");
  const weekdayOver2 = val("weekdayOver2");

  const holidays = [val("h1"), val("h2"), val("h3"), val("h4"), val("h5")];
  const holidayDays = val("holidayDays");

  if (!salary || !totalOT) {
    document.getElementById("detail").innerHTML = "ğŸ“‹ è«‹è¼¸å…¥æœ¬è–ªå’Œç¸½åŠ ç­æ™‚æ•¸ä»¥é–‹å§‹è¨ˆç®—";
    animateNumber(document.getElementById("total"), Number(document.getElementById("total").innerText.replace(/,/g, '')) || 0, 0);
    return;
  }

  const hourly = salary / 30 / 8;

  const holidayOTHours = holidays.reduce((a, b) => a + b, 0);
  const nationalOTHours = holidayDays * 8;

  const weekdayUnder2 =
    Math.max(totalOT - holidayOTHours - nationalOTHours - weekdayOver2, 0);

  const weekdayUnder2Pay = weekdayUnder2 * hourly * 1.34;
  const weekdayOver2Pay = weekdayOver2 * hourly * 1.67;

  let holidayPayTotal = 0;
  holidays.forEach(h => holidayPayTotal += holidayPay(h, hourly));

  const nationalPay = nationalOTHours * hourly;

  const total =
    weekdayUnder2Pay +
    weekdayOver2Pay +
    holidayPayTotal +
    nationalPay;

  const currentTotal = Number(document.getElementById("total").innerText.replace(/,/g, '')) || 0;
  const roundedTotal = Math.round(total);

  document.getElementById("detail").innerHTML = `
    <div style="display: grid; gap: 8px;">
      <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(0, 240, 255, 0.05); border-radius: 8px;">
        <span style="color: var(--neon-cyan);">å¹³æ—¥ 2 å°æ™‚å…§</span>
        <span style="font-weight: 600;">${weekdayUnder2.toFixed(2)} å°æ™‚ â†’ NT$ ${Math.round(weekdayUnder2Pay).toLocaleString('zh-TW')}</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(0, 102, 255, 0.05); border-radius: 8px;">
        <span style="color: var(--neon-blue);">å¹³æ—¥è¶…é 2 å°æ™‚</span>
        <span style="font-weight: 600;">${weekdayOver2.toFixed(2)} å°æ™‚ â†’ NT$ ${Math.round(weekdayOver2Pay).toLocaleString('zh-TW')}</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(139, 92, 246, 0.05); border-radius: 8px;">
        <span style="color: var(--neon-purple);">åœ‹å®šå‡æ—¥åŠ ç­</span>
        <span style="font-weight: 600;">${nationalOTHours} å°æ™‚ â†’ NT$ ${Math.round(nationalPay).toLocaleString('zh-TW')}</span>
      </div>
      <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255, 0, 255, 0.05); border-radius: 8px;">
        <span style="color: var(--neon-pink);">ä¼‘æ¯æ—¥åŠ ç­</span>
        <span style="font-weight: 600;">${holidayOTHours.toFixed(2)} å°æ™‚ â†’ NT$ ${Math.round(holidayPayTotal).toLocaleString('zh-TW')}</span>
      </div>
    </div>
  `;

  animateNumber(document.getElementById("total"), currentTotal, roundedTotal);
}
</script>

</body>
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./service-worker.js");
}
</script>

</html>
